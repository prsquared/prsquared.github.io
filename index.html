<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CHRL KE – Exam Launcher</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f3f4f6;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      background: #0f172a;
      color: #fff;
      padding: 1rem 1.2rem;
    }
    h1 {
      font-size: 1.2rem;
      margin: 0;
    }
    .tabs {
      display: flex;
      gap: .35rem;
      background: #e2e8f0;
      padding: .4rem .4rem 0 .4rem;
      flex-wrap: wrap;
    }
    .tab {
      background: #cbd5f5;
      padding: .4rem .7rem;
      border-radius: .35rem .35rem 0 0;
      cursor: pointer;
      font-size: .85rem;
      border: 1px solid #cbd5f5;
    }
    .tab.active {
      background: #ffffff;
      border-bottom: 1px solid #ffffff;
      font-weight: bold;
    }

    .viewer-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #fff;
      border-top: 1px solid #cbd5f5;
    }
    .controls {
      padding: .5rem .75rem;
      border-bottom: 1px solid #e2e8f0;
      display: flex;
      align-items: center;
      gap: .5rem;
      background: #fff;
    }
    .controls button {
      background: #0f766e;
      color: #fff;
      border: none;
      border-radius: .35rem;
      padding: .35rem .7rem;
      cursor: pointer;
      font-size: .8rem;
    }
    .controls button[disabled] {
      background: #94a3b8;
      cursor: not-allowed;
    }
    .page-buttons {
      display: flex;
      gap: .35rem;
      flex-wrap: wrap;
    }
    .page-btn {
      background: #e2e8f0;
      border: none;
      border-radius: .35rem;
      padding: .25rem .6rem;
      cursor: pointer;
      font-size: .75rem;
    }
    .page-btn.active {
      background: #0f172a;
      color: #fff;
      font-weight: bold;
    }
    iframe {
      flex: 1;
      border: none;
      width: 100%;
      background: #fff;
    }
  </style>
</head>
<body>
  <header>
    <h1>CHRL KE – Exam Launcher</h1>
  </header>

  <!-- Tabs will be injected here -->
  <div id="exam-tabs" class="tabs"></div>

  <div class="viewer-area">
    <div class="controls">
      <button id="prev-page-btn">Previous</button>
      <div id="page-buttons" class="page-buttons"></div>
      <button id="next-page-btn">Next</button>
      <span id="status" style="margin-left:auto; font-size:.75rem; color:#475569;"></span>
      <div id="aggregate-progress" style="display:flex; flex-direction:column; gap:.2rem; min-width:190px; margin-left:1rem;">
        <div id="progress-text" style="font-size:.7rem; color:#334155;">Progress: 0 / 250 (0%)</div>
        <div style="background:#e2e8f0; height:6px; border-radius:4px; overflow:hidden;">
          <div id="progress-bar-fill" style="background:#0f766e; width:0%; height:100%; transition:width .4s ease;"></div>
        </div>
      </div>
    </div>
    <div id="global-actions" style="display:flex; flex-wrap:wrap; gap:.5rem; padding:.6rem .8rem; border-bottom:1px solid #e2e8f0; background:#f8fafc; align-items:center;">
      <button id="submit-all-btn" style="background:#0f766e; color:#fff; border:none; border-radius:.35rem; padding:.45rem .9rem; font-size:.75rem; cursor:pointer;">Submit Entire Exam</button>
      <button id="clear-all-btn" style="background:#dc2626; color:#fff; border:none; border-radius:.35rem; padding:.45rem .9rem; font-size:.75rem; cursor:pointer;">Clear All Answers</button>
      <div id="global-result" style="font-size:.75rem; color:#0f172a; margin-left:auto; max-width:100%;"></div>
    </div>
    <iframe id="exam-frame" title="Exam Viewer" src=""></iframe>
    <!-- Start Exam Overlay (hidden once exam begins) -->
    <div id="start-exam-overlay" style="flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:1.2rem; padding:2rem; text-align:center; background:#ffffff; border-top:1px solid #e2e8f0;">
      <div style="max-width:640px; font-size:.9rem; line-height:1.4; color:#334155;">
        <h2 style="margin:0 0 .5rem 0; font-size:1.1rem; color:#0f172a;">Start the Exam</h2>
        <p style="margin:.3rem 0;">When you click <strong>Start Exam</strong>, the first page of questions will load and your time-on-task can begin. Your answers are saved automatically in this browser (local only) as you go.</p>
        <p style="margin:.3rem 0;">You can switch pages at any time after starting. Progress and any full-exam submission results will appear above.</p>
        <p style="margin:.6rem 0 0 0; font-size:.75rem; color:#64748b;">Note: Do not use private/incognito mode if you want your answers retained. Clearing browser storage will remove saved responses.</p>
      </div>
      <button id="start-exam-btn" style="background:#1d4ed8; color:#fff; border:none; padding:.9rem 1.5rem; border-radius:.55rem; font-size:.95rem; cursor:pointer; box-shadow:0 2px 4px rgba(0,0,0,.15);">Start Exam</button>
    </div>
  </div>

  <script src="index.js"></script>
</body>
</html>
