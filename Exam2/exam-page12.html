<!DOCTYPE html><html lang="en-CA"><head><meta charset="UTF-8"/><title>CHRL KE – Exam2 – Page 12 (Q221–Q240)</title><meta name="viewport" content="width=device-width,initial-scale=1"/><style>body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:#f6f7fb;margin:0;padding:0 0 3rem}header{background:#0c4a6e;color:#fff;padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}header h1{font-size:1.1rem;margin:0}nav a{color:#fff;text-decoration:none;background:rgba(255,255,255,.15);padding:.35rem .75rem;border-radius:.375rem;font-size:.85rem;margin-right:.4rem}main{max-width:1100px;margin:1.5rem auto;background:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 6px 20px rgba(15,23,42,.08)}fieldset{border:1px solid #e2e8f0;border-radius:.5rem;margin-bottom:1.25rem;padding:1rem 1rem .85rem;background:#fff}legend{font-weight:600;padding:0 .35rem}.options{display:grid;gap:.5rem;margin-top:.6rem}label{display:flex;gap:.5rem;align-items:flex-start;cursor:pointer}input[type=radio]{margin-top:.25rem}.actions{margin-top:1.25rem;display:flex;gap:.75rem;flex-wrap:wrap;align-items:center}button{background:#0c4a6e;color:#fff;border:none;border-radius:.375rem;padding:.6rem 1.2rem;cursor:pointer;font-weight:600}button.secondary{background:#e2e8f0;color:#0f172a}#result{margin-top:1rem;font-weight:600}.correct{border-color:#22c55e!important;background:#f0fdf4}.incorrect{border-color:#ef4444!important;background:#fef2f2}.correct-option{background:#f0fdf4;border:1px solid #22c55e;border-radius:.4rem;padding:.15rem .4rem}.unanswered-list{margin-top:.75rem;font-size:.9rem}.page-hint{background:#e2e8f0;padding:.6rem .75rem;border-radius:.4rem;font-size:.8rem;margin-bottom:1rem;color:#0f172a}textarea, input[type=text]{width:100%;max-width:650px;padding:.5rem;border:1px solid #cbd5e1;border-radius:.4rem;font-family:inherit;font-size:.9rem}</style></head><body><header><h1>CHRL KE Practice – Exam2 – Page 12 (Questions 221–240)</h1><nav><a href="../index.html">← Index</a><a href="exam-page11.html">← Prev</a><a href="exam-page13.html">Next →</a></nav></header><main><p class="page-hint">This page concludes the Enabling / Integration domain (ethical data use, change governance, risk, ESG) and adds two cross-domain wrap questions. Includes one short-answer (Q239). Answers persist locally.</p><form id="chrl-exam">

	<!-- Q221 -->
	<fieldset id="fs-q221"><legend>Q221. A Canadian HR team wants to embed “privacy by design” into a new HR analytics platform. What is the FIRST step to ensure compliance and ethical handling of employee data?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN01 – Ethical data stewardship -->
		<!-- Cognitive: Application -->
		<!-- Source: Belcourt et al. (HR analytics governance); PIPEDA guidance -->
		<!-- Rationale: Initial action is to conduct a systematic assessment of privacy risks before configuration. -->
		<div class="options">
			<label for="q221a"><input type="radio" id="q221a" name="q221" value="A"/>A. Draft role-based access matrices.</label>
			<label for="q221b"><input type="radio" id="q221b" name="q221" value="B"/>B. Mask all data fields immediately.</label>
			<label for="q221c"><input type="radio" id="q221c" name="q221" value="C"/>C. Conduct a structured privacy risk assessment.</label>
			<label for="q221d"><input type="radio" id="q221d" name="q221" value="D"/>D. Publish a dashboard to test adoption.</label>
		</div></fieldset>

	<!-- Q222 -->
	<fieldset id="fs-q222"><legend>Q222. Which element MOST strengthens change governance for an enterprise HRIS replacement?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN02 – Change governance structures -->
		<!-- Cognitive: Analysis -->
		<!-- Source: Kotter & Canadian public sector change case syntheses -->
		<!-- Rationale: Clear definition of decision rights avoids escalation delays and fragmentation. -->
		<div class="options">
			<label for="q222a"><input type="radio" id="q222a" name="q222" value="A"/>A. Broad, rotating sponsorship with no charter.</label>
			<label for="q222b"><input type="radio" id="q222b" name="q222" value="B"/>B. Detailed decision-rights matrix for scope, funding and design.</label>
			<label for="q222c"><input type="radio" id="q222c" name="q222" value="C"/>C. Weekly motivational emails.</label>
			<label for="q222d"><input type="radio" id="q222d" name="q222" value="D"/>D. Eliminating steering committee minutes.</label>
		</div></fieldset>

	<!-- Q223 (Scenario) -->
	<fieldset id="fs-q223"><legend>Q223. Scenario: A mid-sized Ontario manufacturer is rolling out predictive scheduling algorithms. Supervisors plan to use outputs to trigger discipline for tardiness. What should HR do FIRST to mitigate legal and ethical risk?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN03 – Responsible AI enablement -->
		<!-- Cognitive: Application -->
		<!-- Source: PIPEDA; OCHRO guidance on algorithmic transparency -->
		<!-- Rationale: Bias & impact assessment precedes policy changes or escalation. -->
		<div class="options">
			<label for="q223a"><input type="radio" id="q223a" name="q223" value="A"/>A. Immediately discipline repeated late employees.</label>
			<label for="q223b"><input type="radio" id="q223b" name="q223" value="B"/>B. Conduct an algorithmic impact / bias assessment.</label>
			<label for="q223c"><input type="radio" id="q223c" name="q223" value="C"/>C. Disable the system permanently.</label>
			<label for="q223d"><input type="radio" id="q223d" name="q223" value="D"/>D. Outsource attendance management to vendors.</label>
		</div></fieldset>

	<!-- Q224 -->
	<fieldset id="fs-q224"><legend>Q224. An integrated people dashboard links turnover, safety incidents and overtime costs. What metric BEST signals value creation for executives?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN04 – Strategic insight synthesis -->
		<!-- Cognitive: Analysis -->
		<!-- Source: Parkinson & Draimin – cost linkage; Belcourt – strategic KPIs -->
		<!-- Rationale: Economic value add per FTE ties human capital to financial performance. -->
		<div class="options">
			<label for="q224a"><input type="radio" id="q224a" name="q224" value="A"/>A. Count of dashboards viewed weekly.</label>
			<label for="q224b"><input type="radio" id="q224b" name="q224" value="B"/>B. Number of HRIS data tables.</label>
			<label for="q224c"><input type="radio" id="q224c" name="q224" value="C"/>C. Human capital ROI (value add per FTE).</label>
			<label for="q224d"><input type="radio" id="q224d" name="q224" value="D"/>D. Size of the HR analytics team.</label>
		</div></fieldset>

	<!-- Q225 -->
	<fieldset id="fs-q225"><legend>Q225. What is the PRIMARY purpose of establishing data lineage documentation for HR metrics?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN05 – Data integrity & controls -->
		<!-- Cognitive: Recall -->
		<!-- Source: HR Metrics governance; internal audit practices -->
		<!-- Rationale: Ensures traceability from source to report to validate integrity. -->
		<div class="options">
			<label for="q225a"><input type="radio" id="q225a" name="q225" value="A"/>A. Provide coaching scripts to supervisors.</label>
			<label for="q225b"><input type="radio" id="q225b" name="q225" value="B"/>B. Trace data from origin systems to reported values.</label>
			<label for="q225c"><input type="radio" id="q225c" name="q225" value="C"/>C. Replace job evaluation factors.</label>
			<label for="q225d"><input type="radio" id="q225d" name="q225" value="D"/>D. Increase the volume of stored personal data.</label>
		</div></fieldset>

	<!-- Q226 -->
	<fieldset id="fs-q226"><legend>Q226. Which control MOST reduces risk of unauthorized change to a compensation dataset feeding analytics models?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN05 – Data integrity & controls -->
		<!-- Cognitive: Analysis -->
		<!-- Source: ITGC / HR data governance practices -->
		<!-- Rationale: Segregation + change log supports auditability and integrity. -->
		<div class="options">
			<label for="q226a"><input type="radio" id="q226a" name="q226" value="A"/>A. Weekly deletion of history tables.</label>
			<label for="q226b"><input type="radio" id="q226b" name="q226" value="B"/>B. Segregated write access with versioned change log.</label>
			<label for="q226c"><input type="radio" id="q226c" name="q226" value="C"/>C. Sharing credentials among analysts.</label>
			<label for="q226d"><input type="radio" id="q226d" name="q226" value="D"/>D. Removing exception alerts.</label>
		</div></fieldset>

	<!-- Q227 -->
	<fieldset id="fs-q227"><legend>Q227. A quarterly workforce risk register rates succession gaps as “High.” What is the BEST immediate mitigation?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN06 – Enterprise risk integration -->
		<!-- Cognitive: Application -->
		<!-- Source: COSO-aligned HR risk practices -->
		<!-- Rationale: Targeted acceleration of development/ready-now pipelines addresses gap cause. -->
		<div class="options">
			<label for="q227a"><input type="radio" id="q227a" name="q227" value="A"/>A. Remove the risk since it is documented.</label>
			<label for="q227b"><input type="radio" id="q227b" name="q227" value="B"/>B. Launch accelerated development plans for critical roles.</label>
			<label for="q227c"><input type="radio" id="q227c" name="q227" value="C"/>C. Freeze all internal transfers.</label>
			<label for="q227d"><input type="radio" id="q227d" name="q227" value="D"/>D. Convert all roles to casual status.</label>
		</div></fieldset>

	<!-- Q228 -->
	<fieldset id="fs-q228"><legend>Q228. Which outcome BEST indicates integration of ESG (Environmental, Social, Governance) metrics into people strategy?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN07 – ESG & people impact linkage -->
		<!-- Cognitive: Application -->
		<!-- Source: Canadian sustainability disclosure trends -->
		<!-- Rationale: Tying exec variable pay to human capital/DEI metrics shows real integration. -->
		<div class="options">
			<label for="q228a"><input type="radio" id="q228a" name="q228" value="A"/>A. Publishing a stand‑alone HR brochure.</label>
			<label for="q228b"><input type="radio" id="q228b" name="q228" value="B"/>B. Linking executive incentives to DEI & retention metrics.</label>
			<label for="q228c"><input type="radio" id="q228c" name="q228" value="C"/>C. Collecting data without disclosure.</label>
			<label for="q228d"><input type="radio" id="q228d" name="q228" value="D"/>D. Outsourcing CSR reporting only.</label>
		</div></fieldset>

	<!-- Q229 (Scenario) -->
	<fieldset id="fs-q229"><legend>Q229. Scenario: An HR analytics pilot shows correlation between long commute times and regrettable turnover. Which next action MOST strengthens causal insight before executive rollout?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN04 – Strategic insight synthesis -->
		<!-- Cognitive: Analysis -->
		<!-- Source: Analytics validation process (Belcourt; Parkinson & Draimin) -->
		<!-- Rationale: Control for confounders (job family, pay band) to test robustness. -->
		<div class="options">
			<label for="q229a"><input type="radio" id="q229a" name="q229" value="A"/>A. Announce commuter subsidy immediately.</label>
			<label for="q229b"><input type="radio" id="q229b" name="q229" value="B"/>B. Run multivariate analysis adding key control variables.</label>
			<label for="q229c"><input type="radio" id="q229c" name="q229" value="C"/>C. Delete the dataset to avoid bias.</label>
			<label for="q229d"><input type="radio" id="q229d" name="q229" value="D"/>D. Replace turnover metric with absenteeism only.</label>
		</div></fieldset>

	<!-- Q230 -->
	<fieldset id="fs-q230"><legend>Q230. Which indicator BEST reflects maturation of a Canadian organization's people analytics function?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN04 – Strategic insight synthesis -->
		<!-- Cognitive: Recall -->
		<!-- Source: Analytics maturity models (Descriptive→Predictive→Prescriptive) -->
		<!-- Rationale: Shift from descriptive dashboards to predictive/prescriptive decision support marks maturity. -->
		<div class="options">
			<label for="q230a"><input type="radio" id="q230a" name="q230" value="A"/>A. Increase in static monthly headcount tables.</label>
			<label for="q230b"><input type="radio" id="q230b" name="q230" value="B"/>B. Use of predictive models informing strategic decisions.</label>
			<label for="q230c"><input type="radio" id="q230c" name="q230" value="C"/>C. Manual spreadsheet consolidation.</label>
			<label for="q230d"><input type="radio" id="q230d" name="q230" value="D"/>D. Elimination of data governance roles.</label>
		</div></fieldset>

	<!-- Q231 -->
	<fieldset id="fs-q231"><legend>Q231. The PRIMARY benefit of a federated HR data stewardship model is:</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN05 – Data integrity & controls -->
		<!-- Cognitive: Analysis -->
		<!-- Source: Data governance operating models -->
		<!-- Rationale: Balances central standards with local accountability. -->
		<div class="options">
			<label for="q231a"><input type="radio" id="q231a" name="q231" value="A"/>A. Eliminates the need for data standards.</label>
			<label for="q231b"><input type="radio" id="q231b" name="q231" value="B"/>B. Balances centralized standards with decentralized ownership.</label>
			<label for="q231c"><input type="radio" id="q231c" name="q231" value="C"/>C. Restricts analytics to head office only.</label>
			<label for="q231d"><input type="radio" id="q231d" name="q231" value="D"/>D. Encourages uncontrolled local definitions.</label>
		</div></fieldset>

	<!-- Q232 -->
	<fieldset id="fs-q232"><legend>Q232. Which practice MOST improves transparency of algorithmic decision support in talent acquisition?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN03 – Responsible AI enablement -->
		<!-- Cognitive: Application -->
		<!-- Source: Emerging Canadian AI governance guidelines -->
		<!-- Rationale: Documented feature set & periodic bias testing fosters trust & compliance. -->
		<div class="options">
			<label for="q232a"><input type="radio" id="q232a" name="q232" value="A"/>A. Proprietary features kept confidential.</label>
			<label for="q232b"><input type="radio" id="q232b" name="q232" value="B"/>B. Documenting model features and publishing bias test summaries.</label>
			<label for="q232c"><input type="radio" id="q232c" name="q232" value="C"/>C. Eliminating human review entirely.</label>
			<label for="q232d"><input type="radio" id="q232d" name="q232" value="D"/>D. Using historical data without validation.</label>
		</div></fieldset>

	<!-- Q233 -->
	<fieldset id="fs-q233"><legend>Q233. What is the MOST appropriate escalation point for unresolved people-related risk items with enterprise-level impact?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN06 – Enterprise risk integration -->
		<!-- Cognitive: Recall -->
		<!-- Source: Canadian corporate governance risk practices -->
		<!-- Rationale: People risk with enterprise impact escalates to Board (via HR / Governance Committee). -->
		<div class="options">
			<label for="q233a"><input type="radio" id="q233a" name="q233" value="A"/>A. Individual supervisor.</label>
			<label for="q233b"><input type="radio" id="q233b" name="q233" value="B"/>B. Board Committee with risk oversight.</label>
			<label for="q233c"><input type="radio" id="q233c" name="q233" value="C"/>C. Peer social committee.</label>
			<label for="q233d"><input type="radio" id="q233d" name="q233" value="D"/>D. External media outlet.</label>
		</div></fieldset>

	<!-- Q234 -->
	<fieldset id="fs-q234"><legend>Q234. A key success FACTOR for sustaining post‑merger cultural integration is:</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN02 – Change governance structures -->
		<!-- Cognitive: Recall -->
		<!-- Source: Canadian M&A integration cases -->
		<!-- Rationale: Aligned leadership behaviors reinforce target culture. -->
		<div class="options">
			<label for="q234a"><input type="radio" id="q234a" name="q234" value="A"/>A. Leadership modeling of desired cultural behaviours.</label>
			<label for="q234b"><input type="radio" id="q234b" name="q234" value="B"/>B. Eliminating all legacy recognition programs immediately.</label>
			<label for="q234c"><input type="radio" id="q234c" name="q234" value="C"/>C. Suppressing dissenting feedback.</label>
			<label for="q234d"><input type="radio" id="q234d" name="q234" value="D"/>D. Avoiding communications to reduce fatigue.</label>
		</div></fieldset>

	<!-- Q235 (Scenario) -->
	<fieldset id="fs-q235"><legend>Q235. Scenario: A Crown corporation implements a hybrid work policy. Early survey data shows declining inclusion scores for remote Indigenous employees. What should HR do FIRST?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN07 – ESG & people impact linkage -->
		<!-- Cognitive: Application -->
		<!-- Source: Canadian inclusion & reconciliation frameworks -->
		<!-- Rationale: Targeted qualitative engagement informs tailored interventions before policy overhaul. -->
		<div class="options">
			<label for="q235a"><input type="radio" id="q235a" name="q235" value="A"/>A. Ignore early data until annual cycle completes.</label>
			<label for="q235b"><input type="radio" id="q235b" name="q235" value="B"/>B. Conduct focused listening sessions with impacted employees.</label>
			<label for="q235c"><input type="radio" id="q235c" name="q235" value="C"/>C. Remove the inclusion question set.</label>
			<label for="q235d"><input type="radio" id="q235d" name="q235" value="D"/>D. Publish executive bonuses early.</label>
		</div></fieldset>

	<!-- Q236 -->
	<fieldset id="fs-q236"><legend>Q236. Which measure BEST indicates effective integration of risk management into talent processes?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN06 – Enterprise risk integration -->
		<!-- Cognitive: Analysis -->
		<!-- Source: Integrated risk frameworks (COSO) -->
		<!-- Rationale: Inclusion of risk treatment milestones in quarterly talent dashboards shows embedded control. -->
		<div class="options">
			<label for="q236a"><input type="radio" id="q236a" name="q236" value="A"/>A. Stand‑alone annual risk memo only.</label>
			<label for="q236b"><input type="radio" id="q236b" name="q236" value="B"/>B. Risk treatment milestones within quarterly talent reporting.</label>
			<label for="q236c"><input type="radio" id="q236c" name="q236" value="C"/>C. Eliminating heat maps.</label>
			<label for="q236d"><input type="radio" id="q236d" name="q236" value="D"/>D. Tracking only financial audit points.</label>
		</div></fieldset>

	<!-- Q237 -->
	<fieldset id="fs-q237"><legend>Q237. What factor MOST improves sustainability of analytics-driven decisions?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN04 – Strategic insight synthesis -->
		<!-- Cognitive: Analysis -->
		<!-- Source: Change adoption & analytics lifecycle literature -->
		<!-- Rationale: Embedding decisions into operating cadences (e.g., quarterly reviews) institutionalizes use. -->
		<div class="options">
			<label for="q237a"><input type="radio" id="q237a" name="q237" value="A"/>A. One‑time executive presentation.</label>
			<label for="q237b"><input type="radio" id="q237b" name="q237" value="B"/>B. Embedding metric reviews into recurring governance forums.</label>
			<label for="q237c"><input type="radio" id="q237c" name="q237" value="C"/>C. Removing performance indicators after launch.</label>
			<label for="q237d"><input type="radio" id="q237d" name="q237" value="D"/>D. Preventing business user access.</label>
		</div></fieldset>

	<!-- Q238 -->
	<fieldset id="fs-q238"><legend>Q238. Which indicator BEST shows ethical management of employee monitoring technologies?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN03 – Responsible AI enablement -->
		<!-- Cognitive: Application -->
		<!-- Source: PIPEDA; Canadian privacy commissioner guidelines -->
		<!-- Rationale: Limiting purpose + transparent disclosure + periodic review is aligned with necessity & proportionality. -->
		<div class="options">
			<label for="q238a"><input type="radio" id="q238a" name="q238" value="A"/>A. Broad collection without notification.</label>
			<label for="q238b"><input type="radio" id="q238b" name="q238" value="B"/>B. Clear purpose limitation & annual necessity review.</label>
			<label for="q238c"><input type="radio" id="q238c" name="q238" value="C"/>C. Sharing raw logs externally.</label>
			<label for="q238d"><input type="radio" id="q238d" name="q238" value="D"/>D. Permanent retention of all data.</label>
		</div></fieldset>

	<!-- Q239 Short Answer -->
	<fieldset id="fs-q239"><legend>Q239. Short Answer: What formal assessment (two to three words) is conducted early to identify and address privacy risks in a people analytics initiative?</legend>
		<!-- Domain: EN – Enabling / Integration -->
		<!-- Competency: C0EN01 – Ethical data stewardship -->
		<!-- Cognitive: Recall -->
		<!-- Source: PIPEDA privacy governance guidance -->
		<!-- Rationale: Privacy Impact Assessment (PIA) evaluates data flows and mitigations upfront. -->
		<input type="text" name="q239" aria-label="Answer for Q239" placeholder="Enter answer" />
	</fieldset>

	<!-- Q240 -->
	<fieldset id="fs-q240"><legend>Q240. Which cross-domain action BEST integrates total rewards data, learning analytics and safety leading indicators to drive strategic workforce investment?</legend>
		<!-- Domain: EN – Enabling / Integration (Cross-domain synthesis) -->
		<!-- Competency: C0EN04 – Strategic insight synthesis -->
		<!-- Cognitive: Analysis -->
		<!-- Source: Integrated human capital reporting (Belcourt; Parkinson & Draimin) -->
		<!-- Rationale: Multi-factor regression supports evidence-based allocation across interventions. -->
		<div class="options">
			<label for="q240a"><input type="radio" id="q240a" name="q240" value="A"/>A. Present anecdotal success stories only.</label>
			<label for="q240b"><input type="radio" id="q240b" name="q240" value="B"/>B. Track each dataset independently without linkage.</label>
			<label for="q240c"><input type="radio" id="q240c" name="q240" value="C"/>C. Eliminate safety metrics to simplify analysis.</label>
			<label for="q240d"><input type="radio" id="q240d" name="q240" value="D"/>D. Build a model correlating combined indicators to performance outcomes.</label>
		</div></fieldset>

	<div class="actions"><button type="submit">Score Page</button><button type="button" class="secondary" id="clear-answers">Clear Answers</button><a href="../index.html" style="text-decoration:none;"><button type="button" class="secondary">Back to Index</button></a></div><div id="result"></div><div id="unanswered" class="unanswered-list"></div>
	</form></main><script>const answerKey={q221:"C",q222:"B",q223:"B",q224:"C",q225:"B",q226:"B",q227:"B",q228:"B",q229:"B",q230:"B",q231:"B",q232:"B",q233:"B",q234:"A",q235:"B",q236:"B",q237:"B",q238:"B",q239:"privacy impact assessment",q240:"D"};const SHORT_ANSWER=new Set(["q239"]);const FORM_ID="chrl-exam";const STORAGE_KEY="CHRL_EXAM2_PAGE12_ANSWERS";const form=document.getElementById(FORM_ID);const resultDiv=document.getElementById("result");const unansweredDiv=document.getElementById("unanswered");const clearBtn=document.getElementById("clear-answers");document.addEventListener("DOMContentLoaded",()=>{const saved=localStorage.getItem(STORAGE_KEY);if(saved){try{const answers=JSON.parse(saved);Object.entries(answers).forEach(([qid,val])=>{if(SHORT_ANSWER.has(qid)){const el=form.querySelector(`[name="${qid}"]`);if(el)el.value=val;}else{const radio=document.querySelector(`input[name="${qid}"][value="${val}"]`);if(radio)radio.checked=true}})}catch(e){}}});form.addEventListener("change",()=>{const data={};Object.keys(answerKey).forEach(qid=>{if(SHORT_ANSWER.has(qid)){const el=form.querySelector(`[name='${qid}']`);if(el&&el.value.trim())data[qid]=el.value.trim();}else{const checked=document.querySelector(`input[name='${qid}']:checked`);if(checked)data[qid]=checked.value;}});localStorage.setItem(STORAGE_KEY,JSON.stringify(data))});form.addEventListener("submit",e=>{e.preventDefault();let correct=0;let total=0;const unanswered=[];Object.entries(answerKey).forEach(([qid,_])=>{total++;const fs=document.getElementById(`fs-${qid}`);fs?.classList.remove("correct","incorrect");document.querySelectorAll(`#fs-${qid} label`).forEach(l=>l.classList.remove('correct-option'));if(SHORT_ANSWER.has(qid)){const el=form.querySelector(`[name='${qid}']`);if(!el||!el.value.trim()){unanswered.push(qid.toUpperCase());return}const userVal=el.value.trim().toLowerCase();const target=answerKey[qid].toLowerCase();if(userVal===target){correct++;fs?.classList.add("correct")}else{fs?.classList.add("incorrect")}}else{const checked=document.querySelector(`input[name='${qid}']:checked`);if(!checked){unanswered.push(qid.toUpperCase());return}if(checked.value===answerKey[qid]){correct++;fs?.classList.add("correct")}else{fs?.classList.add("incorrect");const correctLabel=document.querySelector(`input[name='${qid}'][value='${answerKey[qid]}']`)?.parentElement;if(correctLabel)correctLabel.classList.add("correct-option")}}});if(total===0){resultDiv.textContent="No questions on this page."}else{resultDiv.textContent=`Score: ${correct} / ${total} (${total?Math.round(correct/total*100):0}%)`;}unansweredDiv.textContent=unanswered.length?`Unanswered: ${unanswered.join(', ')}`:''});clearBtn.addEventListener("click",()=>{if(!confirm("Clear saved answers for this page?"))return;localStorage.removeItem(STORAGE_KEY);form.querySelectorAll("input[type=radio]:checked").forEach(r=>r.checked=false);SHORT_ANSWER.forEach(qid=>{const el=form.querySelector(`[name='${qid}']`);if(el)el.value=""});document.querySelectorAll("fieldset.correct, fieldset.incorrect").forEach(fs=>fs.classList.remove("correct","incorrect"));document.querySelectorAll(".correct-option").forEach(l=>l.classList.remove("correct-option"));resultDiv.textContent='';unansweredDiv.textContent=''});window.addEventListener('message',event=>{if(event.data?.type==='CHRL_GLOBAL_CLEARED'){if(event.data.exam===2){localStorage.removeItem(STORAGE_KEY);form.querySelectorAll("input[type=radio]:checked").forEach(r=>r.checked=false);SHORT_ANSWER.forEach(qid=>{const el=form.querySelector(`[name='${qid}']`);if(el)el.value=""});document.querySelectorAll("fieldset.correct, fieldset.incorrect").forEach(fs=>fs.classList.remove("correct","incorrect"));document.querySelectorAll(".correct-option").forEach(l=>l.classList.remove("correct-option"));resultDiv.textContent='';unansweredDiv.textContent=''}}});</script></body></html>