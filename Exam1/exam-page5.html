<!DOCTYPE html>
<html lang="en-CA">
<head>
  <meta charset="UTF-8" />
  <title>CHRL KE – Exam1 – Page 5 (Q81–Q100)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: #f6f7fb; margin: 0; padding: 0 0 3rem 0; }
    header { background: #0c4a6e; color: #fff; padding: 1rem 1.5rem; display: flex; justify-content: space-between; align-items: center; gap: 1rem; flex-wrap: wrap; }
    header h1 { font-size: 1.1rem; margin: 0; }
    nav a { color: #fff; text-decoration: none; background: rgba(255,255,255,0.15); padding: 0.35rem 0.75rem; border-radius: 0.375rem; font-size: 0.85rem; margin-right: 0.4rem; }
    main { max-width: 1100px; margin: 1.5rem auto; background: #fff; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 6px 20px rgba(15,23,42,0.08); }
    fieldset { border: 1px solid #e2e8f0; border-radius: 0.5rem; margin-bottom: 1.25rem; padding: 1rem 1rem 0.85rem 1rem; background: #fff; }
    legend { font-weight: 600; padding: 0 0.35rem; }
    .options { display: grid; gap: 0.5rem; margin-top: 0.6rem; }
    label { display: flex; gap: 0.5rem; align-items: flex-start; cursor: pointer; }
    input[type="radio"] { margin-top: 0.25rem; }
    textarea, input[type="text"] { width: 100%; padding: 0.5rem; font-family: inherit; font-size: 0.9rem; border: 1px solid #cbd5e1; border-radius: 0.4rem; }
    .actions { margin-top: 1.25rem; display: flex; gap: 0.75rem; flex-wrap: wrap; align-items: center; }
    button { background: #0c4a6e; color: #fff; border: none; border-radius: 0.375rem; padding: 0.6rem 1.2rem; cursor: pointer; font-weight: 600; }
    button.secondary { background: #e2e8f0; color: #0f172a; }
    #result { margin-top: 1rem; font-weight: 600; }
    .correct { border-color: #22c55e !important; background: #f0fdf4; }
    .incorrect { border-color: #ef4444 !important; background: #fef2f2; }
  .correct-option { background:#f0fdf4; border:1px solid #22c55e; border-radius:0.4rem; padding:0.15rem 0.4rem; }
    .unanswered-list { margin-top: 0.75rem; font-size: 0.9rem; }
    .page-hint { background: #e2e8f0; padding: 0.6rem 0.75rem; border-radius: 0.4rem; font-size: 0.8rem; margin-bottom: 1rem; color: #0f172a; }
  </style>
</head>
<body>
  <header>
    <h1>CHRL KE Practice – Exam1 – Page 5 (Questions 81–100)</h1>
    <nav>
      <a href="index.html">← Index</a>
      <a href="exam-page4.html">← Prev</a>
      <a href="exam-page6.html">Next →</a>
    </nav>
  </header>
  <main>
    <p class="page-hint">This page scores only Q81–Q100. Includes MCQs, scenarios, and short-answer items (Labour & Employee Relations). Answers cached locally.</p>
    <form id="chrl-exam">
      <!-- Domain 50 – Labour & Employee Relations continues (Q81–Q100) -->

      <!-- Q81 -->
      <fieldset id="fs-q81">
        <legend>Q81. Which of the following BEST defines “interest-based bargaining” in Canadian collective negotiations?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR01 – Negotiation approaches -->
        <!-- Cognitive: Recall -->
        <!-- Source: Hebdon & Brown – bargaining styles -->
        <!-- Rationale: Focuses on underlying interests vs positions to create integrative options. -->
        <div class="options">
          <label for="q81a"><input type="radio" id="q81a" name="q81" value="A" />A. Emphasizing fixed positions and withholding data.</label>
          <label for="q81b"><input type="radio" id="q81b" name="q81" value="B" />B. Exploring underlying mutual interests to craft mutually beneficial solutions.</label>
          <label for="q81c"><input type="radio" id="q81c" name="q81" value="C" />C. Using arbitration instead of negotiation.</label>
          <label for="q81d"><input type="radio" id="q81d" name="q81" value="D" />D. Refusing to share any proposals until strike notice.</label>
        </div>
      </fieldset>

      <!-- Q82 -->
      <fieldset id="fs-q82">
        <legend>Q82. Which factor MOST increases the risk of an unfair labour practice finding against an employer?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR01 – Employer conduct -->
        <!-- Cognitive: Application -->
        <!-- Source: Hebdon & Brown – ULP examples -->
        <!-- Rationale: Threats, intimidation, promises of benefits to undermine organizing increase risk. -->
        <div class="options">
          <label for="q82a"><input type="radio" id="q82a" name="q82" value="A" />A. Providing factual answers about existing policies.</label>
          <label for="q82b"><input type="radio" id="q82b" name="q82" value="B" />B. Threatening job loss if employees sign union cards.</label>
          <label for="q82c"><input type="radio" id="q82c" name="q82" value="C" />C. Posting neutral government guides on certification.</label>
          <label for="q82d"><input type="radio" id="q82d" name="q82" value="D" />D. Meeting with employees after certification to implement agreement.</label>
        </div>
      </fieldset>

      <!-- Q83 (Scenario) -->
      <fieldset id="fs-q83">
        <legend>Q83. (Scenario) During negotiations, the union insists on wage increases above industry norms citing retention crises. Employer data shows turnover is average and exit interviews cite supervision issues. What should HR propose FIRST?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR01 – Negotiation strategy & data usage -->
        <!-- Cognitive: Analysis -->
        <!-- Source: Hebdon & Brown – data-informed bargaining -->
        <!-- Rationale: Use evidence to reframe issue—address supervision via joint committee while offering market-aligned wages. -->
        <div class="options">
          <label for="q83a"><input type="radio" id="q83a" name="q83" value="A" />A. Accept all wage demands immediately.</label>
          <label for="q83b"><input type="radio" id="q83b" name="q83" value="B" />B. Present turnover data and propose a joint supervision improvement initiative plus market-consistent wage adjustments.</label>
          <label for="q83c"><input type="radio" id="q83c" name="q83" value="C" />C. Terminate supervisors without assessment.</label>
          <label for="q83d"><input type="radio" id="q83d" name="q83" value="D" />D. Cease all bargaining until union lowers demands.</label>
        </div>
      </fieldset>

      <!-- Q84 -->
      <fieldset id="fs-q84">
        <legend>Q84. Which method is MOST effective for resolving an interest grievance early?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR02 – Grievance resolution -->
        <!-- Cognitive: Application -->
        <!-- Source: Hebdon & Brown – early resolution tools -->
        <!-- Rationale: Informal meeting / mediation style discussion before formal steps. -->
        <div class="options">
          <label for="q84a"><input type="radio" id="q84a" name="q84" value="A" />A. Immediate arbitration referral.</label>
          <label for="q84b"><input type="radio" id="q84b" name="q84" value="B" />B. Prompt informal meeting between supervisor, grievor, and union rep to clarify issues.</label>
          <label for="q84c"><input type="radio" id="q84c" name="q84" value="C" />C. Public social media posting.</label>
          <label for="q84d"><input type="radio" id="q84d" name="q84" value="D" />D. Ignoring the grievance until timelines pass.</label>
        </div>
      </fieldset>

      <!-- Q85 -->
      <fieldset id="fs-q85">
        <legend>Q85. What is the MOST appropriate employer response to a lawful strike in Ontario?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR03 – Strike management -->
        <!-- Cognitive: Recall -->
        <!-- Source: Hebdon & Brown – strike conduct -->
        <!-- Rationale: Maintain safety, communicate with stakeholders, continue bargaining where possible. -->
        <div class="options">
          <label for="q85a"><input type="radio" id="q85a" name="q85" value="A" />A. Use violence to disperse picketers.</label>
          <label for="q85b"><input type="radio" id="q85b" name="q85" value="B" />B. Ensure picket line safety, maintain respectful communication, and explore mediated settlement.</label>
          <label for="q85c"><input type="radio" id="q85c" name="q85" value="C" />C. Terminate all strikers immediately.</label>
          <label for="q85d"><input type="radio" id="q85d" name="q85" value="D" />D. Block emergency vehicles from entering.</label>
        </div>
      </fieldset>

      <!-- Q86 -->
      <fieldset id="fs-q86">
        <legend>Q86. Which BEST describes “just cause” in Canadian discipline?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR02 – Just cause standard -->
        <!-- Cognitive: Recall -->
        <!-- Source: Hebdon & Brown – just cause factors -->
        <!-- Rationale: Requires reasonable rule, notice, investigation, proportional penalty. -->
        <div class="options">
          <label for="q86a"><input type="radio" id="q86a" name="q86" value="A" />A. Employer can dismiss without reason.</label>
          <label for="q86b"><input type="radio" id="q86b" name="q86" value="B" />B. Discipline must be supported by a reasonable rule, proper investigation, and proportional response.</label>
          <label for="q86c"><input type="radio" id="q86c" name="q86" value="C" />C. Automatic termination for first minor infraction.</label>
          <label for="q86d"><input type="radio" id="q86d" name="q86" value="D" />D. Discipline based on personal dislike.</label>
        </div>
      </fieldset>

      <!-- Q87 (Scenario) -->
      <fieldset id="fs-q87">
        <legend>Q87. (Scenario) A grievance alleges inconsistent overtime distribution. Records show one crew received 70% of overtime hours. What should HR examine FIRST?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR02 – Overtime allocation fairness -->
        <!-- Cognitive: Analysis -->
        <!-- Source: Hebdon & Brown – overtime grievances -->
        <!-- Rationale: Review contract language and documented selection criteria to determine compliance. -->
        <div class="options">
          <label for="q87a"><input type="radio" id="q87a" name="q87" value="A" />A. Social media reactions.</label>
          <label for="q87b"><input type="radio" id="q87b" name="q87" value="B" />B. Collective agreement overtime language and allocation records for compliance.</label>
          <label for="q87c"><input type="radio" id="q87c" name="q87" value="C" />C. Coffee consumption during shifts.</label>
          <label for="q87d"><input type="radio" id="q87d" name="q87" value="D" />D. Supervisor’s favourite crew.</label>
        </div>
      </fieldset>

      <!-- Q88 -->
      <fieldset id="fs-q88">
        <legend>Q88. Which factor MOST supports a successful mediation during grievance handling?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR02 – Alternative dispute resolution -->
        <!-- Cognitive: Application -->
        <!-- Source: Hebdon & Brown – mediation traits -->
        <!-- Rationale: Neutral mediator + willingness to explore interests. -->
        <div class="options">
          <label for="q88a"><input type="radio" id="q88a" name="q88" value="A" />A. Mediator with clear neutrality and parties willing to explore interests.</label>
          <label for="q88b"><input type="radio" id="q88b" name="q88" value="B" />B. Mandatory secrecy from the union only.</label>
          <label for="q88c"><input type="radio" id="q88c" name="q88" value="C" />C. Refusal to exchange any data.</label>
          <label for="q88d"><input type="radio" id="q88d" name="q88" value="D" />D. Arbitrator deciding outcome immediately.</label>
        </div>
      </fieldset>

      <!-- Q89 -->
      <fieldset id="fs-q89">
        <legend>Q89. Which BEST indicates successful implementation of a return-to-work (RTW) program for injured employees?</legend>
        <!-- Domain: 50 – Labour & Employee Relations (interface with wellness) -->
        <!-- Competency: C0LR04 – RTW coordination -->
        <!-- Cognitive: Application -->
        <!-- Source: Kelloway et al.; Hebdon & Brown – RTW programs -->
        <!-- Rationale: Reduced lost-time days and sustained accommodation success. -->
        <div class="options">
          <label for="q89a"><input type="radio" id="q89a" name="q89" value="A" />A. Rising lost-time injury days.</label>
          <label for="q89b"><input type="radio" id="q89b" name="q89" value="B" />B. Decrease in lost-time days and high percentage of successful sustained accommodations.</label>
          <label for="q89c"><input type="radio" id="q89c" name="q89" value="C" />C. Elimination of all modified duties.</label>
          <label for="q89d"><input type="radio" id="q89d" name="q89" value="D" />D. Refusal to involve the union in RTW discussions.</label>
        </div>
      </fieldset>

      <!-- SHORT-ANSWER SECTION (5 items: Q90–Q94) -->
      <!-- These use text input; answerKey stores lowercase expected values; scoring is case-insensitive trimming whitespace. -->

      <!-- Q90 Short Answer -->
      <fieldset id="fs-q90">
        <legend>Q90. Short Answer: What term describes management bargaining without real intent to reach agreement?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR01 – Bad faith bargaining concepts -->
        <!-- Cognitive: Recall -->
        <!-- Source: Hebdon & Brown – surface bargaining definition -->
        <!-- Rationale: "Surface bargaining" = going through motions without intent to agree. -->
        <input type="text" name="q90" aria-label="Answer for Q90" />
        <!-- Expected: surface bargaining -->
      </fieldset>

      <!-- Q91 Short Answer -->
      <fieldset id="fs-q91">
        <legend>Q91. Short Answer: What formula requires all bargaining unit members to pay union dues?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR01 – Union security -->
        <!-- Cognitive: Recall -->
        <!-- Source: Hebdon & Brown – Rand Formula -->
        <!-- Rationale: Rand Formula ensures dues payment. -->
        <input type="text" name="q91" aria-label="Answer for Q91" />
        <!-- Expected: rand formula -->
      </fieldset>

      <!-- Q92 Short Answer -->
      <fieldset id="fs-q92">
        <legend>Q92. Short Answer: What term refers to the process of resolving rights disputes under a collective agreement?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR02 – Rights arbitration concepts -->
        <!-- Cognitive: Recall -->
        <!-- Source: Hebdon & Brown – grievance arbitration -->
        <!-- Rationale: Grievance arbitration resolves rights disputes. -->
        <input type="text" name="q92" aria-label="Answer for Q92" />
        <!-- Expected: grievance arbitration -->
      </fieldset>

      <!-- Q93 Short Answer -->
      <fieldset id="fs-q93">
        <legend>Q93. Short Answer: What principle requires disciplinary penalties to increase with repeated infractions?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR02 – Progressive discipline -->
        <!-- Cognitive: Recall -->
        <!-- Source: Hebdon & Brown – progressive discipline -->
        <!-- Rationale: Progressive discipline escalates penalties. -->
        <input type="text" name="q93" aria-label="Answer for Q93" />
        <!-- Expected: progressive discipline -->
      </fieldset>

      <!-- Q94 Short Answer -->
      <fieldset id="fs-q94">
        <legend>Q94. Short Answer: What is the term for a negotiation approach focused on mutual gains (underlying needs)?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR01 – Interest-based approach -->
        <!-- Cognitive: Recall -->
        <!-- Source: Hebdon & Brown – interest-based bargaining -->
        <!-- Rationale: Interest-based bargaining seeks integrative solutions. -->
        <input type="text" name="q94" aria-label="Answer for Q94" />
        <!-- Expected: interest-based bargaining -->
      </fieldset>

      <!-- Q95 (Scenario) -->
      <fieldset id="fs-q95">
        <legend>Q95. (Scenario) A mediator proposes a settlement blending wage increases with a new joint training fund. Both parties can meet core interests. What is this an example of?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR01 – Integrative outcomes -->
        <!-- Cognitive: Application -->
        <!-- Source: Hebdon & Brown – integrative bargaining -->
        <!-- Rationale: Combining interests = integrative (win–win) settlement. -->
        <div class="options">
          <label for="q95a"><input type="radio" id="q95a" name="q95" value="A" />A. Distributive concession.</label>
          <label for="q95b"><input type="radio" id="q95b" name="q95" value="B" />B. Integrative settlement.</label>
          <label for="q95c"><input type="radio" id="q95c" name="q95" value="C" />C. Surface bargaining.</label>
          <label for="q95d"><input type="radio" id="q95d" name="q95" value="D" />D. Unfair labour practice.</label>
        </div>
      </fieldset>

      <!-- Q96 -->
      <fieldset id="fs-q96">
        <legend>Q96. Which statement BEST distinguishes rights arbitration from interest arbitration?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR02 – Arbitration types -->
        <!-- Cognitive: Recall -->
        <!-- Source: Hebdon & Brown – rights vs interest arbitration -->
        <!-- Rationale: Rights interprets existing agreement; interest sets new terms when bargaining deadlock. -->
        <div class="options">
          <label for="q96a"><input type="radio" id="q96a" name="q96" value="A" />A. Rights arbitration creates new contract terms.</label>
          <label for="q96b"><input type="radio" id="q96b" name="q96" value="B" />B. Rights arbitration interprets an existing agreement; interest arbitration establishes terms when parties cannot agree.</label>
          <label for="q96c"><input type="radio" id="q96c" name="q96" value="C" />C. Interest arbitration reviews past practice only.</label>
          <label for="q96d"><input type="radio" id="q96d" name="q96" value="D" />D. They are identical processes.</label>
        </div>
      </fieldset>

      <!-- Q97 (Scenario) -->
      <fieldset id="fs-q97">
        <legend>Q97. (Scenario) A supervisor repeatedly delays providing information requested by the union for a grievance investigation. What risk does this create?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR02 – Information disclosure obligations -->
        <!-- Cognitive: Analysis -->
        <!-- Source: Hebdon & Brown – employer duty to provide relevant information -->
        <!-- Rationale: Could be bad faith / procedural unfairness impacting arbitration outcome. -->
        <div class="options">
          <label for="q97a"><input type="radio" id="q97a" name="q97" value="A" />A. Improved labour relations.</label>
          <label for="q97b"><input type="radio" id="q97b" name="q97" value="B" />B. Allegation of bad faith and adverse inference at arbitration.</label>
          <label for="q97c"><input type="radio" id="q97c" name="q97" value="C" />C. Automatic wage increase.</label>
          <label for="q97d"><input type="radio" id="q97d" name="q97" value="D" />D. Faster grievance resolution.</label>
        </div>
      </fieldset>

      <!-- Q98 -->
      <fieldset id="fs-q98">
        <legend>Q98. Which indicator BEST shows effective labour–management committee operation?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR03 – Committee effectiveness -->
        <!-- Cognitive: Application -->
        <!-- Source: Hebdon & Brown – joint committees -->
        <!-- Rationale: Timely resolution of issues, reduced disputes. -->
        <div class="options">
          <label for="q98a"><input type="radio" id="q98a" name="q98" value="A" />A. Rising number of unresolved grievances.</label>
          <label for="q98b"><input type="radio" id="q98b" name="q98" value="B" />B. Issues tracked with action items and declining related grievances.</label>
          <label for="q98c"><input type="radio" id="q98c" name="q98" value="C" />C. No meetings held.</label>
          <label for="q98d"><input type="radio" id="q98d" name="q98" value="D" />D. Committee decisions kept secret from parties.</label>
        </div>
      </fieldset>

      <!-- Q99 -->
      <fieldset id="fs-q99">
        <legend>Q99. Which is a PRIMARY goal of an attendance management program under a Canadian collective agreement?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR04 – Attendance management -->
        <!-- Cognitive: Application -->
        <!-- Source: Hebdon & Brown – attendance management; Kelloway et al. health/safety -->
        <!-- Rationale: Support legitimate absence while addressing excessive non-culpable attendance through accommodation/coaching. -->
        <div class="options">
          <label for="q99a"><input type="radio" id="q99a" name="q99" value="A" />A. Punish all absences equally.</label>
          <label for="q99b"><input type="radio" id="q99b" name="q99" value="B" />B. Balance support for legitimate absences with early identification of problematic patterns and accommodation.</label>
          <label for="q99c"><input type="radio" id="q99c" name="q99" value="C" />C. Eliminate sick leave entirely.</label>
          <label for="q99d"><input type="radio" id="q99d" name="q99" value="D" />D. Ignore attendance to avoid conflict.</label>
        </div>
      </fieldset>

      <!-- Q100 -->
      <fieldset id="fs-q100">
        <legend>Q100. Which outcome BEST evidences effective progressive discipline practices?</legend>
        <!-- Domain: 50 – Labour & Employee Relations -->
        <!-- Competency: C0LR02 – Evaluating discipline systems -->
        <!-- Cognitive: Application -->
        <!-- Source: Hebdon & Brown – progressive discipline effectiveness -->
        <!-- Rationale: Improvement in behaviour and reduction in repeat infractions reflects effective system. -->
        <div class="options">
          <label for="q100a"><input type="radio" id="q100a" name="q100" value="A" />A. Rising repeat infractions after severe penalties.</label>
          <label for="q100b"><input type="radio" id="q100b" name="q100" value="B" />B. Decline in repeat infractions and documented consistent application.</label>
          <label for="q100c"><input type="radio" id="q100c" name="q100" value="C" />C. Discipline applied inconsistently across departments.</label>
          <label for="q100d"><input type="radio" id="q100d" name="q100" value="D" />D. Lack of investigation records.</label>
        </div>
      </fieldset>

      <div class="actions">
        <button type="button" class="secondary" id="clear-answers">Clear Answers</button>
        <a href="exam-page6.html" style="text-decoration:none;"><button type="button" class="secondary">Next Page →</button></a>
      </div>
      <div id="result"></div>
      <div id="unanswered" class="unanswered-list"></div>
    </form>
  </main>

  <script>
    // Exam1 Page5 – Answer Key (Q81–Q100)
    // For short-answer items (q90–q94) answers are lowercase plain strings; evaluation is case-insensitive trim.
    const answerKey = {
      q81: "B",
      q82: "B",
      q83: "B",
      q84: "B",
      q85: "B",
      q86: "B",
      q87: "B",
      q88: "A",
      q89: "B",
      q90: "surface bargaining",
      q91: "rand formula",
      q92: "grievance arbitration",
      q93: "progressive discipline",
      q94: "interest-based bargaining",
      q95: "B",
      q96: "B",
      q97: "B",
      q98: "B",
      q99: "B",
      q100: "B"
    };

    const FORM_ID = "chrl-exam";
    const STORAGE_KEY = "CHRL_EXAM1_PAGE5_ANSWERS";

    const form = document.getElementById(FORM_ID);
    const resultDiv = document.getElementById("result");
    const unansweredDiv = document.getElementById("unanswered");
    const clearBtn = document.getElementById("clear-answers");

    document.addEventListener("DOMContentLoaded", () => {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) {
        const answers = JSON.parse(saved);
        Object.keys(answers).forEach(qid => {
          const val = answers[qid];
          if (qid.startsWith("q9") && parseInt(qid.substring(1),10) >= 90 && parseInt(qid.substring(1),10) <= 94) {
            // short answers
            const input = document.querySelector(`input[name="${qid}"]`);
            if (input) input.value = val;
          } else {
            const radio = document.querySelector(`input[name="${qid}"][value="${val}"]`);
            if (radio) radio.checked = true;
          }
        });
      }
    });

    form.addEventListener("change", () => {
      const data = {};
      Object.keys(answerKey).forEach(qid => {
        if (qid.startsWith("q9") && parseInt(qid.substring(1),10) >= 90 && parseInt(qid.substring(1),10) <= 94) {
          const input = document.querySelector(`input[name="${qid}"]`);
          if (input && input.value.trim() !== "") data[qid] = input.value.trim();
        } else {
          const checked = document.querySelector(`input[name="${qid}"]:checked`);
          if (checked) data[qid] = checked.value;
        }
      });
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    });

    form.addEventListener("submit", function (e) {
      e.preventDefault();
      let score = 0;
      let total = Object.keys(answerKey).length;
      const unanswered = [];

      Object.keys(answerKey).forEach(qid => {
        const fs = document.getElementById("fs-" + qid);
        if (fs) fs.classList.remove("correct", "incorrect");
        document.querySelectorAll(`#fs-${qid} label`).forEach(l=>l.classList.remove('correct-option'));
      });

      Object.keys(answerKey).forEach(qid => {
        const correct = answerKey[qid];
        const fs = document.getElementById("fs-" + qid);
        let chosenVal = null;
        if (qid.startsWith("q9") && parseInt(qid.substring(1),10) >= 90 && parseInt(qid.substring(1),10) <= 94) {
          const input = document.querySelector(`input[name="${qid}"]`);
          if (input && input.value.trim() !== "") chosenVal = input.value.trim().toLowerCase();
          if (!chosenVal) {
            unanswered.push(qid.toUpperCase());
            if (fs) fs.classList.remove("correct", "incorrect");
            return;
          }
          if (chosenVal === correct) {
            score++;
            fs && fs.classList.add("correct");
          } else {
            // highlight only correct answer text (no fieldset red)
            // For short answers we can append a small indicator
            if (fs) {
              const indicator = document.createElement('div');
              indicator.style.marginTop = '0.4rem';
              indicator.style.fontSize = '0.75rem';
              indicator.style.color = '#065f46';
              indicator.textContent = `Correct: ${correct}`;
              fs.appendChild(indicator);
            }
          }
        } else {
          const chosen = document.querySelector(`input[name="${qid}"]:checked`);
          if (!chosen) {
            unanswered.push(qid.toUpperCase());
            if (fs) fs.classList.remove("correct", "incorrect");
            return;
          }
          if (chosen.value === correct) {
            score++;
            fs && fs.classList.add("correct");
          } else {
            const correctInput = document.querySelector(`input[name="${qid}"][value="${correct}"]`);
            if (correctInput) {
              const label = correctInput.closest('label');
              if (label) label.classList.add('correct-option');
            }
          }
        }
      });

      resultDiv.textContent = `Score for Page 5: ${score} / ${total}`;
      if (unanswered.length > 0) {
        unansweredDiv.textContent = "Unanswered: " + unanswered.join(", ");
      } else {
        unansweredDiv.textContent = "";
      }
    });

    clearBtn.addEventListener("click", () => {
      Object.keys(answerKey).forEach(qid => {
        if (qid.startsWith("q9") && parseInt(qid.substring(1),10) >= 90 && parseInt(qid.substring(1),10) <= 94) {
          const input = document.querySelector(`input[name="${qid}"]`);
          if (input) input.value = "";
        } else {
          const checked = document.querySelector(`input[name="${qid}"]:checked`);
          if (checked) checked.checked = false;
        }
        const fs = document.getElementById("fs-" + qid);
        if (fs) fs.classList.remove("correct", "incorrect");
        document.querySelectorAll(`#fs-${qid} label`).forEach(l=>l.classList.remove('correct-option'));
        // remove appended indicators
        if (fs) {
          Array.from(fs.querySelectorAll('div')).forEach(div=>{ if(div.textContent && div.textContent.startsWith('Correct:')) div.remove(); });
        }
      });
      resultDiv.textContent = "";
      unansweredDiv.textContent = "";
      localStorage.removeItem(STORAGE_KEY);
    });

    function highlightFromGlobalSubmission(summary){
      if(!summary) return;
      Object.keys(answerKey).forEach(qid=>{
        const fs = document.getElementById('fs-'+qid);
        if (fs) fs.classList.remove('correct','incorrect');
        document.querySelectorAll(`#fs-${qid} label`).forEach(l=>l.classList.remove('correct-option'));
        if (fs) {
          Array.from(fs.querySelectorAll('div')).forEach(div=>{ if(div.textContent && div.textContent.startsWith('Correct:')) div.remove(); });
        }
        if (qid.startsWith('q9') && parseInt(qid.substring(1),10) >=90 && parseInt(qid.substring(1),10)<=94){
          const input = document.querySelector(`input[name="${qid}"]`);
          if (!input || !input.value.trim()) return;
          const val = input.value.trim().toLowerCase();
          const correct = answerKey[qid];
          if (val === correct){ fs && fs.classList.add('correct'); } else {
            if (fs) {
              const indicator=document.createElement('div');
              indicator.style.marginTop='0.4rem';indicator.style.fontSize='0.75rem';indicator.style.color='#065f46';
              indicator.textContent = `Correct: ${correct}`; fs.appendChild(indicator);
            }
          }
          return;
        }
        const chosen = document.querySelector(`input[name="${qid}"]:checked`);
        if(!chosen) return;
        const correct = answerKey[qid];
        if (chosen.value === correct){ fs && fs.classList.add('correct'); }
        else {
          const correctInput = document.querySelector(`input[name="${qid}"][value="${correct}"]`);
          if (correctInput){ const label = correctInput.closest('label'); if(label) label.classList.add('correct-option'); }
        }
      });
    }
    document.addEventListener('DOMContentLoaded',()=>{ try{const g=localStorage.getItem('CHRL_EXAM1_GLOBAL_RESULT'); if(g) highlightFromGlobalSubmission(JSON.parse(g));}catch(_){}});
    window.addEventListener('message',(e)=>{ if(e.data && e.data.type==='CHRL_GLOBAL_SUBMITTED'){ highlightFromGlobalSubmission(e.data.summary);} });
  </script>
</body>
</html>